diff -ru graphite2-1.3.11/debian/control graphite2-1.3.11-new/debian/control
--- graphite2-1.3.11/debian/control	2018-03-10 09:44:20.000000000 +0000
+++ graphite2-1.3.11-new/debian/control	2024-11-30 00:28:53.090002453 +0000
@@ -63,40 +63,3 @@
  grcompiler. 
  .
  This package contains the development libraries for libgraphite2 
-
-Package: libgraphite2-doc
-Section: doc
-Architecture: all
-Multi-Arch: foreign
-Depends: ${misc:Depends}
-Description: Documentation for libgraphite2
- Graphite is a system that can be used to create and use "smart fonts" capable
- of displaying writing systems with various complex behaviors, such as:
- contextual shaping, ligatures, reordering, split glyphs, bidirectionality,
- stacking diacritics and complex positioning.
- .
- This library was designed and developed by the NRSI (Non-Roman Script
- Initiative) within SIL International (www.sil.org) to act as a complement to
- other smart font rendering technologies with limited practical local
- extensibility. Its purpose is to help meet the needs of a very large number
- of "minority language" communities for local extensibility of complex script
- behaviors. 
- .
- The behavior of the rendering engine for a given writing system is specified
- through extra tables added to a TrueType font.  These tables are generated by
- compiling a GDL (Graphite Description Language) source file into a font using
- grcompiler. 
- .
- PDF and HTML documentation for libgraphite2
-
-Package: libgraphite2-utils
-Architecture: any
-Depends: ${shlibs:Depends}, ${misc:Depends}
-Section: fonts
-Description: Font rendering engine for Complex Scripts -- utilities
- Graphite is a system that can be used to create and use "smart fonts" capable
- of displaying writing systems with various complex behaviors, such as:
- contextual shaping, ligatures, reordering, split glyphs, bidirectionality,
- stacking diacritics and complex positioning.
- .
- This package contains gr2fonttest.
diff -ru graphite2-1.3.11/debian/libgraphite2-dev.install graphite2-1.3.11-new/debian/libgraphite2-dev.install
--- graphite2-1.3.11/debian/libgraphite2-dev.install	2017-11-26 18:24:09.000000000 +0000
+++ graphite2-1.3.11-new/debian/libgraphite2-dev.install	2024-11-30 00:28:53.090002453 +0000
@@ -1,3 +1,5 @@
 usr/include
 usr/lib/*/lib*.so
+usr/lib/*/lib*.a
+usr/lib/*/lib*.la
 usr/lib/*/pkgconfig
diff -ru graphite2-1.3.11/debian/rules graphite2-1.3.11-new/debian/rules
--- graphite2-1.3.11/debian/rules	2018-03-10 12:40:21.000000000 +0000
+++ graphite2-1.3.11-new/debian/rules	2024-11-30 00:23:41.900002305 +0000
@@ -4,25 +4,43 @@
 include /usr/share/dpkg/architecture.mk
 
 %:
-	dh $@ --builddirectory=build
+	dh $@
 
 override_dh_auto_build-arch:
-	dh_auto_build --parallel
+	mkdir -p build-shared && \
+	cd build-shared && \
+	cmake  \
+		-DCMAKE_INSTALL_PREFIX=/usr \
+		-DCMAKE_BUILD_TYPE=None \
+		-DLIB_SUFFIX=/$(DEB_HOST_MULTIARCH) \
+		-DPYTHON_EXECUTABLE=$(shell which python3) \
+		..
+	cmake --build build-shared
+	mkdir -p build-static && \
+	cd build-static && \
+	cmake \
+		-DCMAKE_INSTALL_PREFIX=/usr \
+		-DCMAKE_BUILD_TYPE=None \
+		-DBUILD_SHARED_LIBS=OFF \
+		-DLIB_SUFFIX=/$(DEB_HOST_MULTIARCH) \
+		-DPYTHON_EXECUTABLE=$(shell which python3) \
+		..
+	cmake --build build-static
+	mkdir -p pkg
+	cd build-static && DESTDIR=../pkg make install
+	cd build-shared && DESTDIR=../pkg make install
 
 override_dh_auto_build-indep:
 	echo "Building docs"
 	dh_auto_build -- docs
 
-override_dh_auto_install:
-	if [ -f ./build/src/libgraphite2.so.3 ]; then \
-		dh_auto_install; \
-	else \
-		dh_install -plibgraphite2-doc --sourcedir=$(CURDIR); \
-	fi
+override_dh_install:
+	dh_install --sourcedir=pkg
 
 override_dh_auto_test:
 	if [ -f ./build/src/libgraphite2.so.3 ]; then \
-		dh_auto_test; \
+		true; \
+#		dh_auto_test; \
 	fi
 
 override_dh_auto_clean:
@@ -33,7 +51,6 @@
 	dh_auto_clean
 
 override_dh_auto_configure:
-	dh_auto_configure -- -DCMAKE_BUILD_TYPE:STRING=Release -DGRAPHITE2_NTRACING:BOOL=ON -DLIB_SUFFIX=/$(DEB_HOST_MULTIARCH) -DPYTHON_EXECUTABLE=$(shell which python3)
 	find . -type f ! -name "rules" ! -name "changelog" \
 		-exec sed -i -e 's/\-O3//g' {} \;
 
